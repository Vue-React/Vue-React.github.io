"use strict";(self["webpackChunkvue_catalog"]=self["webpackChunkvue_catalog"]||[]).push([[135],{135:function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var s=i(3396);const n={key:0,class:"loader1"},o={key:1},r={key:0},l={key:1};function a(e,t,i,a,d,c){const u=(0,s.up)("login-form"),p=(0,s.up)("prod-info");return e.$store.state.appIsStarting?((0,s.wg)(),(0,s.iD)("div",n)):((0,s.wg)(),(0,s.iD)("div",o,[e.$store.state.isAuth?((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(p)])):((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(u)]))]))}var d=i(450),c=i(7139),u=i(9242);const p={key:0,class:"loader1"},g={key:1},h={key:0},m=(0,s.Uk)(" ID: "),b=(0,s._)("br",null,null,-1),f=["innerHTML"],k={key:1},y=(0,s._)("hr",null,null,-1),w={key:0},v={key:0,class:"mb-20"},_=["src"],T=["src"],D=["src"];function C(e,t,i,n,o,r){const l=(0,s.up)("my-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(l,{visible:o.delModalVisible,"onUpdate:visible":t[0]||(t[0]=e=>o.delModalVisible=e),header:n.insert[n.lang].myModal.header,message:o.modalText,btn1Text:n.insert[n.lang].myModal.btn1Text,btn2Text:n.insert[n.lang].myModal.btn2Text,onConfirmed:r.deleteProduct,modalColors:"modalOrange",pic:"alert"},null,8,["visible","header","message","btn1Text","btn2Text","onConfirmed"]),e.$store.state.updProdFreeze?((0,s.wg)(),(0,s.iD)("div",p)):((0,s.wg)(),(0,s.iD)("div",g,[e.$store.state.updProd.brand&&e.$store.state.updProd.model?((0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("button",{class:"btn btn-success mr-6 min-80",onClick:t[1]||(t[1]=(0,u.iM)((t=>e.$router.push("/edit/"+o.item.id)),["stop"]))},(0,c.zw)(n.insert[n.lang].editBtn),1),(0,s._)("button",{class:"btn btn-warning min-80",onClick:t[2]||(t[2]=(0,u.iM)((e=>r.confirmDelete(o.item.id,o.item.model)),["stop"]))},(0,c.zw)(n.insert[n.lang].deleteBtn),1),y,(0,s._)("h1",null,(0,c.zw)(o.item.brand),1),(0,s._)("h2",null,(0,c.zw)(o.item.model),1),(0,s._)("p",null,(0,c.zw)(n.insert[n.lang].price)+": "+(0,c.zw)(o.item.price)+" USD",1),o.item.pictures?((0,s.wg)(),(0,s.iD)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.item.pictures,((e,t)=>((0,s.wg)(),(0,s.iD)("span",{key:e},[0===t?((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("img",{src:n.define.pathToUploads+"/"+e,class:"img-fluid",alt:""},null,8,_)])):((0,s.wg)(),(0,s.iD)("img",{key:1,src:n.define.pathToUploads+"/40px/"+e,class:"img-fluid mr-15",alt:""},null,8,T))])))),128))])):((0,s.wg)(),(0,s.iD)("img",{key:1,src:n.define.pathToGraphics+"/default2_190px.png",alt:""},null,8,D))])):((0,s.wg)(),(0,s.iD)("div",h,[m,(0,s._)("b",null,(0,c.zw)(e.$route.params.id),1),b,(0,s._)("div",{innerHTML:n.insert[n.lang].empty},null,8,f)]))]))],64)}var x=i(523),M=i(4143);const $={key:0,class:"dialog-bg"},B={class:"modal_flex"},E=["src"],N=["innerHTML"],P={class:"btns"};function S(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(u.uT,{name:"fade"},{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",$)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(u.uT,{name:"slide-fade"},{default:(0,s.w5)((()=>[i.visible?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"dialog-wrapper",onClick:t[3]||(t[3]=(...e)=>r.hideModal&&r.hideModal(...e))},[i.visible?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:t[2]||(t[2]=(0,u.iM)((()=>{}),["stop"])),class:"dialog__content"},[(0,s._)("div",{class:(0,c.C_)(["header",i.modalColors])},(0,c.zw)(i.header),3),(0,s._)("div",B,[o.picture?((0,s.wg)(),(0,s.iD)("img",{key:0,src:n.define.pathToGraphics+o.picture,alt:""},null,8,E)):(0,s.kq)("",!0),(0,s._)("div",{class:"message",innerHTML:i.message},null,8,N)]),(0,s._)("div",P,[(0,s._)("button",{class:(0,c.C_)(["btn2",o.btn1Color]),onClick:t[0]||(t[0]=(...e)=>r.confirmClick&&r.confirmClick(...e))},(0,c.zw)(i.btn1Text),3),(0,s._)("button",{class:(0,c.C_)(["btn2",o.btn2Color]),onClick:t[1]||(t[1]=(...e)=>r.hideModal&&r.hideModal(...e))},(0,c.zw)(i.btn2Text),3)])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])),_:1})],64)}var z={props:{header:{type:String,default:"Модальное окно"},message:{type:String,default:"Текст модального окна"},btn1Text:{type:String,default:"Ок"},btn2Text:{type:String,default:"Отмена"},visible:{type:Boolean,default:!1},modalColors:{type:String,default:""},pic:{type:String,default:""}},data(){return{picture:"",btn1Color:"blueBtn",btn2Color:"blueBtn"}},emits:["update:visible","confirmed"],methods:{hideModal(){this.$emit("update:visible",!1)},confirmClick(){this.$emit("confirmed")},setModalStyle(){switch(this.pic){case"alert":this.picture="/alert_48px.png",this.btn1Color="orangeBtn",this.btn2Color="orangeBtn";break;case"info":this.picture="/info_48px.png",this.btn1Color="blueBtn",this.btn2Color="blueBtn";break;default:this.picture="",this.btn1Color="greenBtn",this.btn2Color="greenBtn";break}}},mounted(){this.setModalStyle()},setup(){return{define:x.Ou}}},O=i(89);const I=(0,O.Z)(z,[["render",S],["__scopeId","data-v-0b24e222"]]);var R=I,U=i(6265),q=i.n(U),H=i(6673),Z={en:{myModal:{header:"Deleting",btn1Text:"Yes",btn2Text:"No",question:"Delete "},editBtn:"Edit",deleteBtn:"Delete",price:"Price",empty:"Not found<br>Or no description in English<br>Try change language"},uk:{myModal:{header:"Удаление",btn1Text:"Да",btn2Text:"Нет",question:"Удалить "},editBtn:"Редактировать",deleteBtn:"Удалить",price:"Цена",empty:"Не найдено<br>Или отсутствует описание на украинском<br>Попробуйте сменить язык"}},W=i(5041),A={en:{errNetwork:"English version of Notification<br>Нет подключения к серверу",deleted:"English version of Notification<br>Удаление выполнено",text5_1:"English version of Notification<br>Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"},uk:{errNetwork:"Нет подключения к серверу",deleted:"Удаление выполнено",text5_1:"Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"}},L=i(2276),V={components:{MyModal:R},data(){return{item:"",idToDelete:0,modalText:"",delModalVisible:!1}},methods:{getItem(){this.item=this.$store.state.products.find((e=>e.id==this.$route.params.id))},confirmDelete(e,t){this.idToDelete=e,this.modalText=this.insert[this.lang].myModal.question+" <b>"+t+"</b>?",this.delModalVisible=!0},async deleteProduct(){const e=q().create({withCredentials:!0});e.interceptors.request.use((e=>{let t=localStorage.getItem("AccessToken");return t&&(t=encodeURI(t)),e.headers.Authorization="Bearer "+t,e})),e.interceptors.response.use((e=>e),(async t=>{const i=t.config;if(401==t.response.status&&t.config&&!t.config._isRetry&&(i._isRetry=!0,await this.tokenRefresh()))return e.request(i);throw t}));try{const t=await e.post(x.Ou.pathToAPI+"/products/delete.php",JSON.stringify({id:this.idToDelete}),{headers:{Accept:"application/json","Content-Type":"application/json"}});if("success"===t.data.status){const e=this.$store.state.products.filter((e=>e.id!==this.idToDelete));this.$store.commit("SetProducts",e),this.pushNotify(A[this.lang].deleted,"notifyOrange"),this.delModalVisible=!1,this.$router.push("/")}else this.pushNotify(A[this.lang].text5_1+t.data.error+A[this.lang].text5_2,"notifyOrange")}catch(t){if("ERR_NETWORK"===t.code)return void this.pushNotify(A[this.lang].errNetwork,"notifyOrange");switch(t.response.data.status){case"expired":console.log(" expired [E1] (BOTH TOKENS IS EXPIRED) ");break;case"failed":console.log(" failed [E2]");break;case"denied":console.log(" denied [E3]");break;case"approved":console.log(" approved [E4] ");break;case"locked":console.log(" locked [E5] ");break;default:console.log("error [E6]: "+t);break}}}},mounted(){this.getUpdProd(this.$route.params.id),this.item=this.$store.state.updProd},watch:{"$store.state.language":function(){this.getUpdProd(this.$route.params.id),this.item=this.$store.state.updProd}},setup(){const{tokenRefresh:e}=(0,M.Z)(),{lang:t}=(0,L.Z)(),{pushNotify:i}=(0,W.Z)(),{deleteData:s,getUpdProd:n}=(0,H.Z)();return{define:x.Ou,tokenRefresh:e,lang:t,insert:Z,pushNotify:i,deleteData:s,getUpdProd:n}}};const Y=(0,O.Z)(V,[["render",C]]);var K=Y,j={components:{LoginForm:d.Z,ProdInfo:K}};const F=(0,O.Z)(j,[["render",a]]);var G=F}}]);
//# sourceMappingURL=135.030c102e.js.map