"use strict";(self["webpackChunkvue_catalog"]=self["webpackChunkvue_catalog"]||[]).push([[747],{6267:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var o=r(3396),l=r(7139);const n={key:0,class:"loader1"},s={key:1},a={key:0},i={key:1};function d(e,t,r,d,c,u){const p=(0,o.up)("login-form"),h=(0,o.up)("form-add");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("h1",null,(0,l.zw)(d.insert[d.lang].header),1),e.$store.state.appIsStarting?((0,o.wg)(),(0,o.iD)("div",n)):((0,o.wg)(),(0,o.iD)("div",s,[e.$store.state.isAuth?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(h,{insert:d.insert[d.lang]},null,8,["insert"])])):((0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(p)]))]))])}var c=r(450),u=r(9242);const p={class:"form-group mb-10"},h=["value","placeholder"],m={class:"form-group mb-10"},g=["value","placeholder"],b={class:"form-group mb-20"},w=["value"],f=(0,o._)("hr",{class:"w540 hr-dashed"},null,-1),k={class:"form-group mb-10"},P=["placeholder"],v={class:"form-group mb-10"},_=["placeholder"],$=(0,o._)("br",null,null,-1);function y(e,t,r,n,s,a){const i=(0,o.up)("multi-upload");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("form",{onSubmit:t[6]||(t[6]=(0,u.iM)((()=>{}),["prevent"]))},[(0,o.Uk)((0,l.zw)(r.insert.brand.label)+": ",1),(0,o._)("div",p,[(0,o._)("input",{class:(0,l.C_)(["form-control w540",{notfilled:s.isFilled1}]),value:e.$store.state.newProd.brand,onInput:t[0]||(t[0]=(...e)=>a.inputBrand&&a.inputBrand(...e)),placeholder:r.insert.brand.placeholder},null,42,h)]),(0,o.Uk)(" "+(0,l.zw)(r.insert.model.label)+": ",1),(0,o._)("div",m,[(0,o._)("input",{class:(0,l.C_)(["form-control w540",{notfilled:s.isFilled2}]),value:e.$store.state.newProd.model,onInput:t[1]||(t[1]=(...e)=>a.inputModel&&a.inputModel(...e)),placeholder:r.insert.model.placeholder},null,42,g)]),(0,o.Uk)(" "+(0,l.zw)(r.insert.price)+": ",1),(0,o._)("div",b,[(0,o._)("input",{class:"form-control w100 text-center inline-block",value:e.$store.state.newProd.price,onInput:t[2]||(t[2]=(...e)=>a.inputPrice&&a.inputPrice(...e)),placeholder:""},null,40,w)]),(0,o.Wm)(i,{ref:"uplModule",uploadButton:r.insert.uploadButton,uploadedFiles:r.insert.uploadedFiles},null,8,["uploadButton","uploadedFiles"]),f,(0,o._)("h5",null,(0,l.zw)(r.insert.translationHeader)+":",1),(0,o.Uk)(" "+(0,l.zw)(r.insert.brand2.label)+": ",1),(0,o._)("div",k,[(0,o.wy)((0,o._)("input",{class:(0,l.C_)(["form-control w540"]),"onUpdate:modelValue":t[3]||(t[3]=t=>e.$store.state.newProd.brand2=t),placeholder:r.insert.brand2.placeholder},null,8,P),[[u.nr,e.$store.state.newProd.brand2]])]),(0,o.Uk)(" "+(0,l.zw)(r.insert.model2.label)+": ",1),(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{class:(0,l.C_)(["form-control w540 mb-30"]),"onUpdate:modelValue":t[4]||(t[4]=t=>e.$store.state.newProd.model2=t),placeholder:r.insert.model2.placeholder},null,8,_),[[u.nr,e.$store.state.newProd.model2]])]),(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.checkForm&&a.checkForm(...e)),class:"btn2 greenBtn"},(0,l.zw)(r.insert.addButton),1)],32),$],64)}var F=r(297),N=r(523),B=r(4143),U=r(5041),E=r(6265),M=r.n(E),x=r(6673),C={en:{errNetwork:"English version of Notification<br>Нет подключения к серверу",text1:"English version of Notification<br>Автомобиль успешно добавлен",text5_1:"English version of Notification<br>Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"},uk:{errNetwork:"Нет подключения к серверу",text1:"Автомобиль успешно добавлен",text5_1:"Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"}},A=r(2276),I={components:{MultiUpload:F.Z},props:{insert:{type:Object,required:!0}},data(){return{isFilled1:!1,isFilled2:!1}},methods:{inputPrice(e){this.$store.commit("SetNewPrice",this.checkPrice(e.target.value))},inputBrand(e){this.$store.commit("SetNewBrand",e),0!==this.$store.state.newProd.brand.length?this.isFilled1=!1:this.isFilled1=!0},inputModel(e){this.$store.commit("SetNewModel",e),0!==this.$store.state.newProd.model.length?this.isFilled2=!1:this.isFilled2=!0},checkForm(){0===this.$store.state.newProd.brand.length&&(this.isFilled1=!0),0===this.$store.state.newProd.model.length&&(this.isFilled2=!0),this.isFilled1||this.isFilled2||this.createProduct()},async createProduct(){const e=M().create({withCredentials:!0});e.interceptors.request.use((e=>{let t=localStorage.getItem("AccessToken");return t&&(t=encodeURI(t)),e.headers.Authorization="Bearer "+t,e})),e.interceptors.response.use((e=>e),(async t=>{const r=t.config;if(401==t.response.status&&t.config&&!t.config._isRetry&&(r._isRetry=!0,await this.tokenRefresh()))return e.request(r);throw t}));try{const t=await e.post(N.Ou.pathToAPI+"/products/create.php",JSON.stringify({price:this.$store.state.newProd.price,pictures:this.$refs.uplModule.newPics,language:this.$store.state.language,brand:this.$store.state.newProd.brand,model:this.$store.state.newProd.model,brand2:this.$store.state.newProd.brand2,model2:this.$store.state.newProd.model2}),{headers:{Accept:"application/json","Content-Type":"application/json"}});"success"===t.data.status?(this.$store.commit("SetNewId",t.data.id),this.$store.commit("SetNewPictures",this.$refs.uplModule.newPics),this.getProducts(),this.$store.commit("ClearNewProd"),this.$refs.uplModule.hideBarAndClean(),this.pushNotify(C[this.lang].text1,"notifyGreen")):(this.pushNotify(C[this.lang].text5_1+t.data.error+C[this.lang].text5_2,"notifyOrange"),console.log("Ошибка:"+t))}catch(t){if(!t.response)return;if("ERR_NETWORK"===t.code)return void this.pushNotify(C[this.lang].errNetwork,"notifyOrange");switch(t.response.data.status){case"expired":console.log(" expired [E1] (BOTH TOKENS IS EXPIRED) ");break;case"failed":console.log(" failed [E2]");break;case"denied":console.log(" denied [E3]");break;case"approved":console.log(" approved [E4] ");break;case"locked":console.log(" locked [E5] ");break;default:console.log("error [E6]: "+t);break}}}},beforeMount(){this.$store.commit("ClearUpdProd")},setup(){const{tokenRefresh:e}=(0,B.Z)(),{lang:t}=(0,A.Z)(),{pushNotify:r}=(0,U.Z)(),{checkPrice:o,getProducts:l}=(0,x.Z)();return{tokenRefresh:e,lang:t,pushNotify:r,checkPrice:o,getProducts:l}}},S=r(89);const T=(0,S.Z)(I,[["render",y]]);var R=T,z={en:{header:"Adding Auto",brand:{label:"Brand",placeholder:"Type here brand"},model:{label:"Model",placeholder:"Type here model"},price:"Price",uploadButton:"Upload Images",uploadedFiles:"Uploaded Files",translationHeader:"Translation into Ukrainian (not required)",brand2:{label:"Brand",placeholder:"Type here the brand in Ukrainian"},model2:{label:"Model",placeholder:"Type here the model in Ukrainian"},addButton:"Add Auto"},uk:{header:"Добавление авто",brand:{label:"Марка",placeholder:"Напишите марку автомобиля"},model:{label:"Модель",placeholder:"Напишите модель"},price:"Цена",uploadButton:"Загрузить",uploadedFiles:"Загружены файлы",translationHeader:"Перевод на английский (необязательно)",brand2:{label:"Марка",placeholder:"Напишите марку на английском"},model2:{label:"Модель",placeholder:"Напишите модель на английском"},addButton:"Добавить"}},Z={components:{LoginForm:c.Z,FormAdd:R},setup(){const{lang:e}=(0,A.Z)();return{lang:e,insert:z}}};const O=(0,S.Z)(Z,[["render",d]]);var D=O}}]);
//# sourceMappingURL=747.19611111.js.map