"use strict";(self["webpackChunkvue_catalog"]=self["webpackChunkvue_catalog"]||[]).push([[759],{4759:function(e,t,o){o.r(t),o.d(t,{default:function(){return G}});var i=o(3396);const s={key:0,class:"loader1"},n={key:1},l={key:0},r={key:1};function a(e,t,o,a,d,c){const u=(0,i.up)("login-form"),g=(0,i.up)("prod-info");return e.$store.state.appIsStarting?((0,i.wg)(),(0,i.iD)("div",s)):((0,i.wg)(),(0,i.iD)("div",n,[e.$store.state.isAuth?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(g)])):((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(u)]))]))}var d=o(5950),c=o(7139),u=o(9242);const g={key:0,class:"loader1"},p={key:1},h={key:0},m=(0,i.Uk)(" ID: "),b=(0,i._)("br",null,null,-1),f=["innerHTML"],k={key:1},y=(0,i._)("hr",null,null,-1),w={key:0},v={key:0,class:"mb-20"},T=["src"],_=["src"],D=["src"];function x(e,t,o,s,n,l){const r=(0,i.up)("my-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r,{visible:n.delModalVisible,"onUpdate:visible":t[0]||(t[0]=e=>n.delModalVisible=e),header:s.insert[s.lang].myModal.header,message:n.modalText,btn1Text:s.insert[s.lang].myModal.btn1Text,btn2Text:s.insert[s.lang].myModal.btn2Text,onConfirmed:l.deleteProduct,modalColors:"modalOrange",pic:"alert"},null,8,["visible","header","message","btn1Text","btn2Text","onConfirmed"]),e.$store.state.updProdFreeze?((0,i.wg)(),(0,i.iD)("div",g)):((0,i.wg)(),(0,i.iD)("div",p,[e.$store.state.updProd.brand&&e.$store.state.updProd.model?((0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("button",{class:"btn btn-success mr-6 min-80",onClick:t[1]||(t[1]=(0,u.iM)((t=>e.$router.push("/edit/"+n.item.id)),["stop"]))},(0,c.zw)(s.insert[s.lang].editBtn),1),(0,i._)("button",{class:"btn btn-warning min-80",onClick:t[2]||(t[2]=(0,u.iM)((e=>l.confirmDelete(n.item.id,n.item.model)),["stop"]))},(0,c.zw)(s.insert[s.lang].deleteBtn),1),y,(0,i._)("h1",null,(0,c.zw)(n.item.brand),1),(0,i._)("h2",null,(0,c.zw)(n.item.model),1),(0,i._)("p",null,(0,c.zw)(s.insert[s.lang].price)+": "+(0,c.zw)(n.item.price)+" USD",1),n.item.pictures?((0,i.wg)(),(0,i.iD)("div",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.item.pictures,((e,t)=>((0,i.wg)(),(0,i.iD)("span",{key:e},[0===t?((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("img",{src:s.define.pathToUploads+"/"+e,class:"img-fluid",alt:""},null,8,T)])):((0,i.wg)(),(0,i.iD)("img",{key:1,src:s.define.pathToUploads+"/40px/"+e,class:"img-fluid mr-15",alt:""},null,8,_))])))),128))])):((0,i.wg)(),(0,i.iD)("img",{key:1,src:s.define.pathToGraphics+"/default2_190px.png",alt:""},null,8,D))])):((0,i.wg)(),(0,i.iD)("div",h,[m,(0,i._)("b",null,(0,c.zw)(e.$route.params.id),1),b,(0,i._)("div",{innerHTML:s.insert[s.lang].empty},null,8,f)]))]))],64)}var C=o(523),M=o(4143);const P={key:0,class:"dialog-bg"},$={className:"modal_flex"},B=["src"],E=["innerHTML"],N={class:"btns"};function S(e,t,o,s,n,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(u.uT,{name:"fade"},{default:(0,i.w5)((()=>[o.visible?((0,i.wg)(),(0,i.iD)("div",P)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(u.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[o.visible?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"dialog-wrapper",onClick:t[3]||(t[3]=(...e)=>l.hideModal&&l.hideModal(...e))},[o.visible?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[2]||(t[2]=(0,u.iM)((()=>{}),["stop"])),class:"dialog__content"},[(0,i._)("div",{class:(0,c.C_)(["header",o.modalColors])},(0,c.zw)(o.header),3),(0,i._)("div",$,[n.picture?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.define.pathToGraphics+n.picture,alt:""},null,8,B)):(0,i.kq)("",!0),(0,i._)("div",{class:"message",innerHTML:o.message},null,8,E)]),(0,i._)("div",N,[(0,i._)("button",{class:(0,c.C_)(["btn2",n.btn1Color]),onClick:t[0]||(t[0]=(...e)=>l.confirmClick&&l.confirmClick(...e))},(0,c.zw)(o.btn1Text),3),(0,i._)("button",{class:(0,c.C_)(["btn2",n.btn2Color]),onClick:t[1]||(t[1]=(...e)=>l.hideModal&&l.hideModal(...e))},(0,c.zw)(o.btn2Text),3)])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])),_:1})],64)}var z={props:{header:{type:String,default:"Модальное окно"},message:{type:String,default:"Текст модального окна"},btn1Text:{type:String,default:"Ок"},btn2Text:{type:String,default:"Отмена"},visible:{type:Boolean,default:!1},modalColors:{type:String,default:""},pic:{type:String,default:""}},data(){return{picture:"",btn1Color:"blueBtn",btn2Color:"blueBtn"}},emits:["update:visible","confirmed"],methods:{hideModal(){this.$emit("update:visible",!1)},confirmClick(){this.$emit("confirmed")},setModalStyle(){switch(this.pic){case"alert":this.picture="/alert_48px.png",this.btn1Color="orangeBtn",this.btn2Color="orangeBtn";break;case"info":this.picture="/info_48px.png",this.btn1Color="blueBtn",this.btn2Color="blueBtn";break;default:this.picture="",this.btn1Color="greenBtn",this.btn2Color="greenBtn";break}}},mounted(){this.setModalStyle()},setup(){return{define:C.Ou}}},I=o(89);const O=(0,I.Z)(z,[["render",S],["__scopeId","data-v-ccafba5c"]]);var R=O,U=o(6265),q=o.n(U),A=o(6673),H={en:{myModal:{header:"Deleting",btn1Text:"Yes",btn2Text:"No",question:"Delete "},editBtn:"Edit",deleteBtn:"Delete",price:"Price",empty:"Not found<br>Or no description in English<br>Try change language"},uk:{myModal:{header:"Удаление",btn1Text:"Да",btn2Text:"Нет",question:"Удалить "},editBtn:"Редактировать",deleteBtn:"Удалить",price:"Цена",empty:"Не найдено<br>Или отсутствует описание на украинском<br>Попробуйте сменить язык"}},Z=o(5041),W={en:{errNetwork:"English version of Notification<br>Нет подключения к серверу",deleted:"English version of Notification<br>Удаление выполнено",text5_1:"English version of Notification<br>Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"},uk:{errNetwork:"Нет подключения к серверу",deleted:"Удаление выполнено",text5_1:"Ошибка. Ответ сервера: ",text5_2:"<br>Подробности в консоли"}},L=o(2276),V={components:{MyModal:R},data(){return{name:"ProdInfo",item:"",idToDelete:0,modalText:"",delModalVisible:!1}},methods:{getItem(){this.item=this.$store.state.products.find((e=>e.id==this.$route.params.id))},confirmDelete(e,t){this.idToDelete=e,this.modalText=this.insert[this.lang].myModal.question+" <b>"+t+"</b>?",this.delModalVisible=!0,console.log("-> confirmDelete() id:"+e)},async deleteProduct(){console.log("\n\n@click ~~~~~~~~~~ deleteProduct ~~~~~~~~~~ ");const e=q().create({withCredentials:!0});e.interceptors.request.use((e=>{console.log(">>>> customAxios - request (config)");let t=localStorage.getItem("AccessToken");return t&&(t=encodeURI(t)),e.headers.Authorization="Bearer "+t,e})),e.interceptors.response.use((e=>(console.log(">>>> customAxios - response (config)"),e)),(async t=>{console.log(">>>> customAxios - response (error)");const o=t.config;if(401==t.response.status&&t.config&&!t.config._isRetry&&(o._isRetry=!0,console.log("> 401 !!!!!!!!!!!: "),await this.tokenRefresh()))return console.log(" tokenRefresh TRUE!"),e.request(o);throw t}));try{const t=await e.post(C.Ou.pathToAPI+"/products/delete.php",JSON.stringify({id:this.idToDelete}),{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log("[3] response: ",t),"success"===t.data.status){console.log("deleteData() id:"+this.idToDelete);const e=this.$store.state.products.filter((e=>e.id!==this.idToDelete));this.$store.commit("SetProducts",e),this.pushNotify(W[this.lang].deleted,"notifyOrange"),this.delModalVisible=!1,this.$router.push("/")}else this.pushNotify(W[this.lang].text5_1+t.data.error+W[this.lang].text5_2,"notifyOrange"),console.log("Ошибка:"+t)}catch(t){if(console.log("e: ",t),"ERR_NETWORK"===t.code)return this.pushNotify(W[this.lang].errNetwork,"notifyOrange"),void console.log("Нет подключения к серверу");switch(t.response.data.status){case"expired":console.log(" expired [E1] (BOTH TOKENS IS EXPIRED) ");break;case"failed":console.log(" failed [E2]");break;case"denied":console.log(" denied [E3]");break;case"approved":console.log(" approved [E4] ");break;case"locked":console.log(" locked [E5] ");break;default:console.log("error [E6]: "+t);break}}}},mounted(){this.getUpdProd(this.$route.params.id),this.item=this.$store.state.updProd},watch:{"$store.state.language":function(){console.log("[ProdInfo] -> language changes detected "),this.getUpdProd(this.$route.params.id),this.item=this.$store.state.updProd}},setup(){const{tokenRefresh:e}=(0,M.Z)(),{lang:t}=(0,L.Z)(),{pushNotify:o}=(0,Z.Z)(),{deleteData:i,getUpdProd:s}=(0,A.Z)();return{define:C.Ou,tokenRefresh:e,lang:t,insert:H,pushNotify:o,deleteData:i,getUpdProd:s}}};const Y=(0,I.Z)(V,[["render",x]]);var K=Y,j={components:{LoginForm:d.Z,ProdInfo:K}};const F=(0,I.Z)(j,[["render",a]]);var G=F}}]);
//# sourceMappingURL=759.466809d7.js.map